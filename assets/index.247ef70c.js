var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,r=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(l)for(var a of l(t))n.call(t,a)&&i(e,a,t[a]);return e},s=(e,l)=>t(e,a(l));import{p as m,a as d,r as g,c as p,o as h,n as f,b as c,t as u,d as b,e as y,f as x,g as C,h as _,i as V,w as D,j as k,k as S,l as w,m as v,q as O}from"./vendor.6e5ce36b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const E=(e=!1)=>({content:[],targetElement:document.body,textStyle:{top:20,left:20,color:"rgba(150, 150, 150, .15)",alpha:1,align:"left",fontFamily:'"PingFang SC","Lantinghei SC","Microsoft YaHei",arial,"MS Gothic","\\5b8b\\4f53",sans-serif,tahoma',fontSize:16,rotate:e?0:-20,lineHeight:25},imageStyle:{width:200,height:200,position:"left top",repeat:e?"no-repeat":"repeat"}});function A(e,t){if("[object Object]"!==toString.call(e)||"[object Object]"!==toString.call(t))return t;for(const a in t)if(e.hasOwnProperty(a)){"content"===a&&"string"==typeof e[a]&&(e[a]=e[a].trim().split(",").filter((e=>!!e)));const l=e[a];"[object Object]"===toString.call(l)?t[a]=A(l,t[a]):t[a]=l}return t}class P{constructor(e){return this.createWatermark(e)}createWatermark(e){const t=document.createElement("canvas");t.width=e.imageStyle.width,t.height=e.imageStyle.height;const a=t.getContext("2d");e.textStyle.rotate&&a.rotate(e.textStyle.rotate*Math.PI/180),a.font=`${parseInt(e.textStyle.fontSize)}px ${e.textStyle.fontFamily}`,a.globalAlpha=e.textStyle.alpha,a.fillStyle=e.textStyle.color,a.textBaseline="Middle",a.textAlign=e.textStyle.align;let l=e.textStyle.left,o=e.textStyle.top;"right"===e.textStyle.align&&(l=e.imageStyle.width-e.textStyle.left),"string"==typeof e.content?a.fillText(e.content,l,o):Array.isArray(e.content)&&e.content.forEach((t=>{a.fillText(t,l,o),o+=e.textStyle.lineHeight}));const n=t.toDataURL("image/png"),i=document.createElement("div");return i.id=e.elementId,i.style.pointerEvents="none",i.style.position="absolute",i.style.zIndex="100000",i.style.width=e.targetElement.scrollWidth+"px",i.style.height=e.targetElement.scrollHeight+"px",i.style.top=e.targetElement.offsetTop+"px",i.style.left=e.targetElement.offsetLeft+"px",i.style.backgroundImage=`url(${n})`,i.style.backgroundPosition=e.imageStyle.position,i.style.backgroundRepeat=e.imageStyle.repeat,i}}const H=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;class U{constructor(e){if(!e instanceof HTMLElement)throw new Error(`targetElement (${e}) is not HTMLElement`);this.targetElement=e,this.container=this.targetElement===document.body?document.body:this.targetElement.parentElement,this.elementId="watermarkElementId"+1e4*Math.random(),this.observer=null,this.watermark=null,this.options=null}static init(e=document.body){return new U(e)}setForImage(e,t){if(t)this.targetElement.dataset.watermark="";else{if("marked"===this.targetElement.dataset.watermark)return;this.__src__=this.targetElement.src.toString(),this.__img__=this.targetElement.cloneNode(!0)}this.options=A(s(r({},e),{targetElement:this.targetElement}),r({},E(!0)));const a=new Image;a.crossOrigin="anonymous",a.onerror=t=>{this.setForMask(e),a.onerror=null},a.src=this.__src__,a.onload=e=>{let t=document.createElement("canvas");t.width=this.options.imageStyle.width,t.height=this.options.imageStyle.height;const a=parseInt(this.options.imageStyle.width),l=parseInt(this.options.imageStyle.height);t.width=this.targetElement.clientWidth,t.height=this.targetElement.clientHeight;let o=t.getContext("2d");o.drawImage(this.__img__,0,0),this.options.textStyle.rotate&&o.setTransform(1,this.options.textStyle.rotate*Math.PI/180,0,1,0,0),o.font=`${parseInt(this.options.textStyle.fontSize)}px ${this.options.textStyle.fontFamily}`,o.globalAlpha=this.options.textStyle.alpha,o.fillStyle=this.options.textStyle.color,o.textBaseline="Middle",o.textAlign=this.options.textStyle.align;let n=0,i=0;const r=Array.isArray(this.options.content)?this.options.content:[this.options.content];if("repeat"===this.options.imageStyle.repeat)for(let m=0;m<t.width;m+=a){n=m+this.options.textStyle.left;for(let e=0;e<t.height;e+=l)i=e+this.options.textStyle.top,r.forEach((e=>{o.fillText(e,n,i),i+=this.options.textStyle.lineHeight}))}else n=t.width-this.options.imageStyle.width-this.options.textStyle.left,i=t.height-this.options.imageStyle.height-this.options.textStyle.top,r.forEach((e=>{o.fillText(e,n,i),i+=this.options.textStyle.lineHeight}));this.targetElement.setAttribute("data-watermark","marked");const s=t.toDataURL("image/png");this.targetElement.src=s,o=t=null}}setForMask(e){this.clearObserver(),e.content&&e.content.length&&(this.removeWatermark(),this.options=A(s(r({},e),{targetElement:this.targetElement}),r({},E())),this.createAndAppend())}setOption(e,t=!1){console.log(e),this.targetElement instanceof HTMLImageElement?this.setForImage(e,t):this.setForMask(e)}createAndAppend(){this.clearObserver(),this.options.content&&this.options.content.length&&(this.removeWatermark(),this.watermark=new P(s(r({},this.options),{elementId:this.elementId})),this.container.appendChild(this.watermark),this.observer=new H(((e,t)=>{for(let a=0;a<e.length;a++){const t=e[a];if("childList"===t.type&&[].some.call(t.removedNodes,(e=>e===this.watermark))){console.log("The watermark node has been removed."),this.createAndAppend();break}if("attributes"===t.type){console.log("The "+t.attributeName+" attribute was modified."),this.createAndAppend();break}}})),this.observer.observe(this.container,{attributes:!0,childList:!0,subtree:!0}))}clear(){this.clearObserver(),this.removeWatermark()}clearObserver(){this.observer&&(this.observer.disconnect(),this.observer=null)}removeWatermark(){this.watermark&&this.watermark.parentElement&&(this.watermark.parentElement.removeChild(this.watermark),this.watermark=null)}}const z=()=>{const e=new Date;return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`};const L={name:"ForPage",setup(e,t){const a=[],l=g({labelPosition:"right",watermarkRef:null,formData:{hasWatermark:!0,checkList:[void 0],content:`CoderMonkey | 码路工人,快乐编程 · 佛系开发, ${z()}`,textAlign:"left",textLeft:20,textTop:100,fontSize:16,lineHeight:25,rotate:-10,textColor:"#fee0b9",textOpacity:1,repeat:"repeat",imagePositionX:"left",imagePositionY:"top",imageWidth:400,imageHeight:300}}),o=p((()=>l.formData.content.split(","))),n=p((()=>`${l.formData.imagePositionX} ${l.formData.imagePositionY}`)),i=p((()=>({content:o.value,textStyle:{left:parseInt(l.formData.textLeft),top:parseInt(l.formData.textTop),rotate:l.formData.rotate,align:l.formData.textAlign,fontSize:l.formData.fontSize,lineHeight:l.formData.lineHeight,color:l.formData.textColor,alpha:l.formData.textOpacity},imageStyle:{width:l.formData.imageWidth,height:l.formData.imageHeight,position:n.value,repeat:l.formData.repeat}}))),m=e=>{d(e?l.formData.checkList:[])},d=e=>{a.forEach((e=>{e.clear(),e=null})),a.length=0,e.forEach((e=>{const t=U.init(e);t.setOption(i.value),a.push(t)}))},b=()=>{l.labelPosition=document.body.clientWidth>1200?"right":"top"},y=()=>{d(l.formData.checkList)};return h((()=>{window.addEventListener("resize",b),f(y)})),c((()=>{window.removeEventListener("resize",b),m()})),s(r({},u(l)),{handleOptionsChange:y,computedOptions:i,toggleWatermark:m,toggleAppendTo:d})}};m("data-v-31b8fa50");const T={class:"tab-for-page",ref:"watermarkRef"},W={class:"page-section__settings"},I=S("无水印 No Watermark"),M=S("加水印 Add Watermark"),R=_("div",null,"以下两项都勾选即多实例 Check Both below for Multi-Instance",-1),F=S("加水印到页面 Add to the full page"),j=S("加水印到标签页 Add to this Tab"),$=_("h3",null,"imageStyle",-1),Y=S("是"),X=S("否"),N=S(" 横： "),B=S("左"),q=S("中"),G=S("右"),J=S(" 纵： "),K=S("上"),Q=S("中"),Z=S("下"),ee={style:{display:"inline-block",width:"120px"}},te=S(" Width: "),ae={style:{display:"inline-block",width:"120px"}},le=S(" Height: "),oe=_("h3",null,"textStyle",-1),ne=S("左"),ie=S("右"),re={style:{"margin-left":"50px"}},se=_("span",{style:{"margin-right":"10px"}},"文字定位",-1),me={style:{display:"inline-block",width:"120px"}},de=S(" Left: "),ge={style:{display:"inline-block",width:"120px"}},pe=S(" Top: "),he=_("div",null,null,-1),fe=_("span",{class:"form-item__tip font-size-tip"},"10 ~ 48 (step 1)",-1),ce=_("span",{class:"form-item__tip font-size-tip"},"15 ~ 60 (step 1)",-1),ue=_("span",{class:"form-item__tip rotate-tip"},"-360 ~ 360 (step 5)",-1),be=_("span",{class:"form-item__tip text-opacity-tip"},"0.01 ~ 1 (step 0.01)",-1),ye=_("span",{class:"form-item__tip text-opacity-tip"}," >> 当颜色中使用了透明度(即 RGBA)时，此处的透明度会同时起作用，建议使用默认值 1",-1),xe={class:"page-section__setting-json"},Ce=_("pre",null,"targetElement: <HTMLElement>[states.watermarkRef]; \r\n      ",-1),_e=S(" 生成的配置对象： "),Ve=_("hr",null,null,-1);d(),L.render=function(e,t,a,l,o,n){const i=b("el-radio"),r=b("el-radio-group"),s=b("el-checkbox"),m=b("el-checkbox-group"),d=b("el-form-item"),g=b("el-input"),p=b("el-divider"),h=b("el-input-number"),f=b("el-color-picker"),c=b("el-form");return y(),x("div",T,[C(" \r\n        水印默认添加到 body 上<br />\r\n        也可指定为页面其它元素\r\n    "),_("section",W,[V(c,{"label-suffix":"：","label-width":"200px","label-position":e.labelPosition},{default:D((()=>[V(d,{label:""},{default:D((()=>[V(r,{modelValue:e.formData.hasWatermark,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData.hasWatermark=t),size:"small",onChange:l.toggleWatermark},{default:D((()=>[V(i,{label:!1},{default:D((()=>[I])),_:1}),V(i,{label:!0},{default:D((()=>[M])),_:1})])),_:1},8,["modelValue","onChange"]),R,V(m,{modelValue:e.formData.checkList,"onUpdate:modelValue":t[1]||(t[1]=t=>e.formData.checkList=t),disabled:!e.formData.hasWatermark,onChange:l.toggleAppendTo},{default:D((()=>[V(s,{label:void 0},{default:D((()=>[F])),_:1}),V(s,{label:e.watermarkRef},{default:D((()=>[j])),_:1},8,["label"])])),_:1},8,["modelValue","disabled","onChange"])])),_:1}),V(d,{label:"水印文字"},{default:D((()=>[V(g,{modelValue:e.formData.content,"onUpdate:modelValue":t[2]||(t[2]=t=>e.formData.content=t),placeholder:"@码路工人",size:"small",onChange:l.handleOptionsChange},null,8,["modelValue","onChange"])])),_:1}),V(p,{"content-position":"left"},{default:D((()=>[$])),_:1}),V(d,{label:"是否重复"},{default:D((()=>[V(r,{modelValue:e.formData.repeat,"onUpdate:modelValue":t[3]||(t[3]=t=>e.formData.repeat=t),size:"small",onChange:l.handleOptionsChange},{default:D((()=>[V(i,{label:"repeat"},{default:D((()=>[Y])),_:1}),V(i,{label:"no-repeat"},{default:D((()=>[X])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),V(d,{label:"水印位置"},{default:D((()=>[_("div",null,[N,V(r,{modelValue:e.formData.imagePositionX,"onUpdate:modelValue":t[4]||(t[4]=t=>e.formData.imagePositionX=t),size:"small",onChange:l.handleOptionsChange},{default:D((()=>[V(i,{label:"left"},{default:D((()=>[B])),_:1}),V(i,{label:"center"},{default:D((()=>[q])),_:1}),V(i,{label:"right"},{default:D((()=>[G])),_:1})])),_:1},8,["modelValue","onChange"])]),_("div",null,[J,V(r,{modelValue:e.formData.imagePositionY,"onUpdate:modelValue":t[5]||(t[5]=t=>e.formData.imagePositionY=t),size:"small",onChange:l.handleOptionsChange},{default:D((()=>[V(i,{label:"top"},{default:D((()=>[K])),_:1}),V(i,{label:"center"},{default:D((()=>[Q])),_:1}),V(i,{label:"bottom"},{default:D((()=>[Z])),_:1})])),_:1},8,["modelValue","onChange"])])])),_:1}),V(d,{label:"水印尺寸"},{default:D((()=>[_("span",ee,[V(g,{type:"number",id:"imageWidth","input-style":{textAlign:"right"},modelValue:e.formData.imageWidth,"onUpdate:modelValue":t[6]||(t[6]=t=>e.formData.imageWidth=t),onChange:l.handleOptionsChange},{prefix:D((()=>[te])),_:1},8,["modelValue","onChange"])]),_("span",ae,[V(g,{type:"number",id:"imageHeight","input-style":{textAlign:"right"},modelValue:e.formData.imageHeight,"onUpdate:modelValue":t[7]||(t[7]=t=>e.formData.imageHeight=t),onChange:l.handleOptionsChange},{prefix:D((()=>[le])),_:1},8,["modelValue","onChange"])])])),_:1}),V(p,{"content-position":"left"},{default:D((()=>[oe])),_:1}),V(d,{label:"文字排版"},{default:D((()=>[V(r,{border:"",modelValue:e.formData.textAlign,"onUpdate:modelValue":t[8]||(t[8]=t=>e.formData.textAlign=t),size:"small",onChange:l.handleOptionsChange},{default:D((()=>[V(i,{label:"left"},{default:D((()=>[ne])),_:1}),V(i,{label:"right"},{default:D((()=>[ie])),_:1})])),_:1},8,["modelValue","onChange"]),_("span",re,[se,_("span",me,[V(g,{modelValue:e.formData.textLeft,"onUpdate:modelValue":t[9]||(t[9]=t=>e.formData.textLeft=t),type:"number",min:0,"input-style":{textAlign:"right"},onChange:l.handleOptionsChange},{prefix:D((()=>[de])),_:1},8,["modelValue","onChange"])]),_("span",ge,[V(g,{modelValue:e.formData.textTop,"onUpdate:modelValue":t[10]||(t[10]=t=>e.formData.textTop=t),type:"number",min:0,"input-style":{textAlign:"right"},onChange:l.handleOptionsChange},{prefix:D((()=>[pe])),_:1},8,["modelValue","onChange"])])]),he])),_:1}),V(d,{label:"字体大小"},{default:D((()=>[V(h,{modelValue:e.formData.fontSize,"onUpdate:modelValue":t[11]||(t[11]=t=>e.formData.fontSize=t),min:10,max:48,step:1,"step-strictly":"",controls:!1,onChange:l.handleOptionsChange},null,8,["modelValue","onChange"]),fe])),_:1}),V(d,{label:"多行文本时用于累加的行高"},{default:D((()=>[V(h,{modelValue:e.formData.lineHeight,"onUpdate:modelValue":t[12]||(t[12]=t=>e.formData.lineHeight=t),min:15,max:60,step:1,"step-strictly":"",controls:!1,onChange:l.handleOptionsChange},null,8,["modelValue","onChange"]),ce])),_:1}),V(d,{label:"文字倾斜"},{default:D((()=>[V(h,{modelValue:e.formData.rotate,"onUpdate:modelValue":t[13]||(t[13]=t=>e.formData.rotate=t),min:-360,max:360,step:5,"step-strictly":"",controls:!1,onChange:l.handleOptionsChange},null,8,["modelValue","onChange"]),ue])),_:1}),V(d,{label:"颜色"},{default:D((()=>[V(f,{modelValue:e.formData.textColor,"onUpdate:modelValue":t[14]||(t[14]=t=>e.formData.textColor=t),"show-alpha":"","color-format":"hex",onChange:l.handleOptionsChange},null,8,["modelValue","onChange"])])),_:1}),V(d,{label:"透明度"},{default:D((()=>[V(h,{modelValue:e.formData.textOpacity,"onUpdate:modelValue":t[15]||(t[15]=t=>e.formData.textOpacity=t),min:.01,max:1,step:.01,"step-strictly":"",controls:!1,onChange:l.handleOptionsChange},null,8,["modelValue","min","step","onChange"]),be,ye])),_:1})])),_:1},8,["label-position"])]),_("section",xe,[Ce,_e,Ve,_("pre",null,k(JSON.stringify(l.computedOptions,null,4))+"\r\n      ",1)])],512)},L.__scopeId="data-v-31b8fa50";const De={name:"SettingForm",emits:["update:modelValue"],props:["modelValue","options"],setup:(e,t)=>({formData:p({get:()=>e.modelValue,set(e){t.emit("update:modelValue",e)}})})},ke=_("h3",null,"imageStyle",-1),Se=S("是"),we=S("否"),ve=S(" 横： "),Oe=S("左"),Ee=S("中"),Ae=S("右"),Pe=S(" 纵： "),He=S("上"),Ue=S("中"),ze=S("下"),Le={style:{display:"inline-block",width:"120px"}},Te=S(" Width: "),We={style:{display:"inline-block",width:"120px"}},Ie=S(" Height: "),Me=_("h3",null,"textStyle",-1),Re=S("左"),Fe=S("右"),je={style:{"margin-left":"50px"}},$e=_("span",{style:{"margin-right":"10px"}},"文字定位",-1),Ye={style:{display:"inline-block",width:"120px"}},Xe=S(" Left: "),Ne={style:{display:"inline-block",width:"120px"}},Be=S(" Top: "),qe=_("div",null,null,-1),Ge=_("span",{class:"form-item__tip font-size-tip"},"10 ~ 48 (step 1)",-1),Je=_("span",{class:"form-item__tip font-size-tip"},"15 ~ 60 (step 1)",-1),Ke=_("span",{class:"form-item__tip rotate-tip"},"-360 ~ 360 (step 5)",-1),Qe=_("span",{class:"form-item__tip text-opacity-tip"},"0.01 ~ 1 (step 0.01)",-1),Ze=_("span",{class:"form-item__tip text-opacity-tip"}," >> 当颜色中使用了透明度(即 RGBA)时，此处的透明度会同时起作用，建议使用默认值 1",-1);De.render=function(e,t,a,l,o,n){const i=b("el-input"),r=b("el-form-item"),s=b("el-divider"),m=b("el-radio"),d=b("el-radio-group"),g=b("el-input-number"),p=b("el-color-picker"),h=b("el-form");return y(),x("div",null,[V(h,{"label-suffix":"：","label-width":"200px"},{default:D((()=>[V(r,{label:"水印文字"},{default:D((()=>[V(i,{modelValue:l.formData.content,"onUpdate:modelValue":t[0]||(t[0]=e=>l.formData.content=e),placeholder:"@码路工人",size:"small",onChange:e.handleOptionsChange},null,8,["modelValue","onChange"])])),_:1}),V(s,{"content-position":"left"},{default:D((()=>[ke])),_:1}),V(r,{label:"是否重复"},{default:D((()=>[V(d,{modelValue:l.formData.repeat,"onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.repeat=e),size:"small",onChange:e.handleOptionsChange},{default:D((()=>[V(m,{label:"repeat"},{default:D((()=>[Se])),_:1}),V(m,{label:"no-repeat"},{default:D((()=>[we])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),V(r,{label:"水印位置"},{default:D((()=>[_("div",null,[ve,V(d,{modelValue:l.formData.imagePositionX,"onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.imagePositionX=e),size:"small",onChange:e.handleOptionsChange},{default:D((()=>[V(m,{label:"left"},{default:D((()=>[Oe])),_:1}),V(m,{label:"center"},{default:D((()=>[Ee])),_:1}),V(m,{label:"right"},{default:D((()=>[Ae])),_:1})])),_:1},8,["modelValue","onChange"])]),_("div",null,[Pe,V(d,{modelValue:l.formData.imagePositionY,"onUpdate:modelValue":t[3]||(t[3]=e=>l.formData.imagePositionY=e),size:"small",onChange:e.handleOptionsChange},{default:D((()=>[V(m,{label:"top"},{default:D((()=>[He])),_:1}),V(m,{label:"center"},{default:D((()=>[Ue])),_:1}),V(m,{label:"bottom"},{default:D((()=>[ze])),_:1})])),_:1},8,["modelValue","onChange"])])])),_:1}),V(r,{label:"水印尺寸"},{default:D((()=>[_("span",Le,[V(i,{type:"number",id:"imageWidth","input-style":{textAlign:"right"},modelValue:l.formData.imageWidth,"onUpdate:modelValue":t[4]||(t[4]=e=>l.formData.imageWidth=e),onChange:e.handleOptionsChange},{prefix:D((()=>[Te])),_:1},8,["modelValue","onChange"])]),_("span",We,[V(i,{type:"number",id:"imageHeight","input-style":{textAlign:"right"},modelValue:l.formData.imageHeight,"onUpdate:modelValue":t[5]||(t[5]=e=>l.formData.imageHeight=e),onChange:e.handleOptionsChange},{prefix:D((()=>[Ie])),_:1},8,["modelValue","onChange"])])])),_:1}),V(s,{"content-position":"left"},{default:D((()=>[Me])),_:1}),V(r,{label:"文字排版"},{default:D((()=>[V(d,{border:"",modelValue:l.formData.textAlign,"onUpdate:modelValue":t[6]||(t[6]=e=>l.formData.textAlign=e),size:"small",onChange:e.handleOptionsChange},{default:D((()=>[V(m,{label:"left"},{default:D((()=>[Re])),_:1}),V(m,{label:"right"},{default:D((()=>[Fe])),_:1})])),_:1},8,["modelValue","onChange"]),_("span",je,[$e,_("span",Ye,[V(i,{modelValue:l.formData.textLeft,"onUpdate:modelValue":t[7]||(t[7]=e=>l.formData.textLeft=e),type:"number",min:0,"input-style":{textAlign:"right"},onChange:e.handleOptionsChange},{prefix:D((()=>[Xe])),_:1},8,["modelValue","onChange"])]),_("span",Ne,[V(i,{modelValue:l.formData.textTop,"onUpdate:modelValue":t[8]||(t[8]=e=>l.formData.textTop=e),type:"number",min:0,"input-style":{textAlign:"right"},onChange:e.handleOptionsChange},{prefix:D((()=>[Be])),_:1},8,["modelValue","onChange"])])]),qe])),_:1}),V(r,{label:"字体大小"},{default:D((()=>[V(g,{modelValue:l.formData.fontSize,"onUpdate:modelValue":t[9]||(t[9]=e=>l.formData.fontSize=e),min:10,max:48,step:1,"step-strictly":"",controls:!1,onChange:e.handleOptionsChange},null,8,["modelValue","onChange"]),Ge])),_:1}),V(r,{label:"多行文本时用于累加的行高"},{default:D((()=>[V(g,{modelValue:l.formData.lineHeight,"onUpdate:modelValue":t[10]||(t[10]=e=>l.formData.lineHeight=e),min:15,max:60,step:1,"step-strictly":"",controls:!1,onChange:e.handleOptionsChange},null,8,["modelValue","onChange"]),Je])),_:1}),V(r,{label:"文字倾斜"},{default:D((()=>[V(g,{modelValue:l.formData.rotate,"onUpdate:modelValue":t[11]||(t[11]=e=>l.formData.rotate=e),min:-360,max:360,step:5,"step-strictly":"",controls:!1,onChange:e.handleOptionsChange},null,8,["modelValue","onChange"]),Ke])),_:1}),V(r,{label:"颜色"},{default:D((()=>[V(p,{modelValue:l.formData.textColor,"onUpdate:modelValue":t[12]||(t[12]=e=>l.formData.textColor=e),"show-alpha":"","color-format":"hex",onChange:e.handleOptionsChange},null,8,["modelValue","onChange"])])),_:1}),V(r,{label:"透明度"},{default:D((()=>[V(g,{modelValue:l.formData.textOpacity,"onUpdate:modelValue":t[13]||(t[13]=e=>l.formData.textOpacity=e),min:.01,max:1,step:.01,"step-strictly":"",controls:!1,onChange:e.handleOptionsChange},null,8,["modelValue","min","step","onChange"]),Qe,Ze])),_:1})])),_:1})])};const et={props:{text:{type:String,default:""}},setup:()=>({})};m("data-v-1eef6c9c");const tt={class:"quote-block"};d(),et.render=function(e,t,a,l,o,n){return y(),x("div",tt,k(a.text),1)},et.__scopeId="data-v-1eef6c9c";const at={name:"DialogConfigSetting",components:{SettingForm:De},props:{visible:{type:Boolean,default:!1},config:{type:Object,default:()=>{}}},emits:["update:visible","update:config"],setup(e,t){const a=g({dialogVisible:p({get:()=>e.visible,set(e){t.emit("update:visible",e)}}),formData:p({get:()=>e.config,set(e){t.emit("update:config",r({},e))}})}),l=p((()=>a.formData.content.split(","))),o=p((()=>`${a.formData.imagePositionX} ${a.formData.imagePositionY}`)),n=p((()=>({content:l.value,targetElement:a.watermarkRef,textStyle:{left:parseInt(a.formData.textLeft),top:parseInt(a.formData.textTop),rotate:a.formData.rotate,align:a.formData.textAlign,fontSize:a.formData.fontSize,lineHeight:a.formData.lineHeight,color:a.formData.textColor,alpha:a.formData.textOpacity},imageStyle:{width:a.formData.imageWidth,height:a.formData.imageHeight,position:o.value,repeat:a.formData.repeat}})));return s(r({},u(a)),{handleClose:()=>{t.emit("close",n),a.dialogVisible=!1}})}},lt={class:"dialog-footer"},ot=S("取 消"),nt=S("确 定");at.render=function(e,t,a,l,o,n){const i=b("SettingForm"),r=b("el-button"),s=b("el-dialog");return y(),x("div",null,[V(s,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogVisible=t),onClose:l.handleClose},{footer:D((()=>[_("span",lt,[V(r,{onClick:t[1]||(t[1]=t=>e.dialogVisible=!1)},{default:D((()=>[ot])),_:1}),V(r,{type:"primary",onClick:l.handleClose},{default:D((()=>[nt])),_:1},8,["onClick"])])])),default:D((()=>[V(i,{modelValue:e.formData,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData=t)},null,8,["modelValue"])])),_:1},8,["modelValue","onClose"])])};const it={name:"ForImage",components:{SettingForm:De,Quote:et,DialogConfigSetting:at},setup(){const e=[],t=g({labelPosition:"right",watermarkRef1:null,watermarkRef2:null,watermarkRef3:null,case1DialogVisible:!1,case2DialogVisible:!1,case3DialogVisible:!1,formData:{content:"CoderMonkey,  码路工人",textAlign:"right",textLeft:20,textTop:100,fontSize:18,lineHeight:25,rotate:-10,textColor:"#d9d9d94d",textOpacity:1,repeat:"no-repeat",imagePositionX:"right",imagePositionY:"bottom",imageWidth:240,imageHeight:180},configCase1:{content:"CoderMonkey | 码路工人,   2012-04 | by MiOne ",textAlign:"left",textLeft:0,textTop:20,fontSize:18,lineHeight:25,rotate:0,textColor:"#b9b9b9",textOpacity:1,repeat:"no-repeat",imagePositionX:"right",imagePositionY:"bottom",imageWidth:240,imageHeight:60},configCase2:{content:"码   路   工   人,CoderMonkey",textAlign:"left",textLeft:50,textTop:100,fontSize:18,lineHeight:25,rotate:-20,textColor:"lightgray",textOpacity:1,repeat:"repeat",imagePositionX:"left",imagePositionY:"top",imageWidth:400,imageHeight:240},configCase3:{content:"CoderMonkey | 码路工人,2018-11-20          , @Tokyo              ",textAlign:"right",textLeft:20,textTop:100,fontSize:18,lineHeight:25,rotate:0,textColor:"#d9d9d9",textOpacity:1,repeat:"no-repeat",imagePositionX:"right",imagePositionY:"bottom",imageWidth:240,imageHeight:180}}),a=e=>{const t=p((()=>e.content.split(","))),a=p((()=>`${e.imagePositionX} ${e.imagePositionY}`));return p((()=>({content:t.value,textStyle:{left:parseInt(e.textLeft),top:parseInt(e.textTop),rotate:e.rotate,align:e.textAlign,fontSize:e.fontSize,lineHeight:e.lineHeight,color:e.textColor,alpha:e.textOpacity},imageStyle:{width:e.imageWidth,height:e.imageHeight,position:a.value,repeat:e.repeat}})))},l=[];l.push(a(t.configCase1)),l.push(a(t.configCase2)),l.push(a(t.configCase3));const o=(t,a=!1)=>{e[t].setOption(l[t].value,a)},n=()=>{t.labelPosition=document.body.clientWidth>1200?"right":"top"};return h((()=>{window.addEventListener("resize",n),e.push(U.init(t.watermarkRef1)),e.push(U.init(t.watermarkRef2)),e.push(U.init(t.watermarkRef3)),t.watermarkRef1.setAttribute("src","./images/clover.png"),t.watermarkRef2.setAttribute("src","./images/tokyo-sky-tree.jpg"),t.watermarkRef3.setAttribute("src","https://gitee.com/Coding-Worker/picture/raw/master/2021-7-28/1627448089888-tokyo-sky-tree.jpg"),t.watermarkRef1.onload=o(0),t.watermarkRef2.onload=o(1),t.watermarkRef3.onload=o(2)})),c((()=>{window.removeEventListener("resize",n),e&&e.forEach((e=>e.clear()))})),s(r({},u(t)),{computedOptions:l,showSettingDialog:e=>{t[`case${e}DialogVisible`]=!0},handleSetting:o})}};m("data-v-f1269860");const rt={class:"tab-for-image"},st={class:"case-1-block flex flex-column align-center"},mt=S("点我修改水印配置 | Click me to set watermark"),dt={ref:"watermarkRef1",class:"el-image__inner"},gt={class:"case-2-block flex flex-column align-center"},pt=S("点我修改水印配置 | Click me to set watermark"),ht={ref:"watermarkRef2",class:"el-image__inner"},ft={class:"case-3-block flex flex-column align-center"},ct=S("点我修改水印配置 | Click me to set watermark"),ut={ref:"watermarkRef3",class:"el-image__inner"};d(),it.render=function(e,t,a,l,o,n){const i=b("Quote"),r=b("el-button"),s=b("DialogConfigSetting"),m=b("el-divider");return y(),x("div",rt,[V(i,{text:"Case 1：Same origin image | no-repeat",class:"case-title"}),_("div",st,[V(r,{onClick:t[0]||(t[0]=e=>l.showSettingDialog(1))},{default:D((()=>[mt])),_:1}),_("img",dt,null,512),e.case1DialogVisible?(y(),w(s,{key:0,visible:e.case1DialogVisible,"onUpdate:visible":t[1]||(t[1]=t=>e.case1DialogVisible=t),config:e.configCase1,"onUpdate:config":t[2]||(t[2]=t=>e.configCase1=t),onClose:t[3]||(t[3]=e=>l.handleSetting(0,!0))},null,8,["visible","config"])):C("v-if",!0)]),V(i,{text:"Case 2：Same origin image | repeat",class:"case-title"}),_("div",gt,[V(r,{onClick:t[4]||(t[4]=e=>l.showSettingDialog(2))},{default:D((()=>[pt])),_:1}),_("img",ht,null,512),e.case2DialogVisible?(y(),w(s,{key:0,visible:e.case2DialogVisible,"onUpdate:visible":t[5]||(t[5]=t=>e.case2DialogVisible=t),config:e.configCase2,"onUpdate:config":t[6]||(t[6]=t=>e.configCase2=t),onClose:t[7]||(t[7]=e=>l.handleSetting(1,!0))},null,8,["visible","config"])):C("v-if",!0)]),V(i,{text:"Case 3：Cross origin image | no-repeat",class:"case-title"}),_("div",ft,[V(r,{onClick:t[8]||(t[8]=e=>l.showSettingDialog(3))},{default:D((()=>[ct])),_:1}),_("img",ut,null,512),e.case3DialogVisible?(y(),w(s,{key:0,visible:e.case3DialogVisible,"onUpdate:visible":t[9]||(t[9]=t=>e.case3DialogVisible=t),config:e.configCase3,"onUpdate:config":t[10]||(t[10]=t=>e.configCase3=t),onClose:t[11]||(t[11]=e=>l.handleSetting(2,!0))},null,8,["visible","config"])):C("v-if",!0)]),V(m),C(' <section class="page-section__setting-json">\r\n      <pre>targetElement: &lt;HTMLElement&gt;[states.watermarkRef?.$el]</pre>\r\n      <span>&nbsp;&nbsp;The Setting JSON</span>\r\n      <hr />\r\n      <pre>{{ JSON.stringify(computedOptions, null, 4) }}</pre>\r\n    </section> ')])},it.__scopeId="data-v-f1269860";const bt={name:"App",components:{ForPage:L,ForImage:it},setup(){const e=g({activeTab:"page"});return r({},u(e))}};m("data-v-7ba5bd90");const yt={class:"app-container"},xt=_("section",{class:"page-section__header flex flex-column align-center"},[_("h1",null,"js-watermarker"),_("div",null,[S(" The demo using: "),_("ul",null,[_("li",null,"Vue3.0"),_("li",null,"Vite"),_("li",null,"Element Plus")])]),_("h3",{class:"title"},"maonianyou@gmail.com")],-1),Ct={class:"page-section__nav-tabs"};d(),bt.render=function(e,t,a,l,o,n){const i=b("ForPage"),r=b("el-tab-pane"),s=b("ForImage"),m=b("el-tabs");return y(),x("div",yt,[xt,_("section",Ct,[V(m,{modelValue:e.activeTab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.activeTab=t)},{default:D((()=>[V(r,{label:"For Page",name:"page"},{default:D((()=>["page"===e.activeTab?(y(),w(i,{key:0})):C("v-if",!0)])),_:1}),V(r,{label:"For Image",name:"image"},{default:D((()=>["image"===e.activeTab?(y(),w(s,{key:0})):C("v-if",!0)])),_:1})])),_:1},8,["modelValue"])])])},bt.__scopeId="data-v-7ba5bd90";v(bt).use(O).mount("#app");
