var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,r=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&i(e,a,t[a]);if(o)for(var a of o(t))n.call(t,a)&&i(e,a,t[a]);return e},s=(e,o)=>t(e,a(o));import{p as m,a as d,r as g,c as p,w as h,o as f,n as u,b as c,t as b,d as y,e as x,f as C,g as _,h as D,i as V,j as k,k as w,l as S,m as v,F as O,q as E,s as z}from"./vendor.7e6a8c13.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const A=(e=!1)=>({content:[],targetElement:document.body,textStyle:{top:20,left:20,color:"rgba(150, 150, 150, .15)",alpha:1,align:"left",fontFamily:'"PingFang SC","Lantinghei SC","Microsoft YaHei",arial,"MS Gothic","\\5b8b\\4f53",sans-serif,tahoma',fontSize:16,rotate:e?0:-20,lineHeight:25},imageStyle:{width:200,height:200,position:"left top",repeat:e?"no-repeat":"repeat"},zIndex:1e4,debug:!1});function I(e,t){if("[object Object]"!==toString.call(e)||"[object Object]"!==toString.call(t))return t;for(const a in t)if(e.hasOwnProperty(a)){if("content"===a&&"string"==typeof e[a]&&(e[a]=e[a].trim().split(",").filter((e=>!!e))),"zIndex"===a){const o=e.zIndex;("number"!=typeof o||Number.isNaN(o)||o<0)&&(e[a]=t[a])}const o=e[a];"[object Object]"===toString.call(o)?t[a]=I(o,t[a]):t[a]=o}return t}class L{constructor(e){return this.createWatermark(e)}createWatermark(e){const t=document.createElement("canvas");t.width=e.imageStyle.width,t.height=e.imageStyle.height;const a=t.getContext("2d");e.textStyle.rotate&&a.rotate(e.textStyle.rotate*Math.PI/180),a.font=`${parseInt(e.textStyle.fontSize)}px ${e.textStyle.fontFamily}`,a.globalAlpha=e.textStyle.alpha,a.fillStyle=e.textStyle.color,a.textBaseline="Middle",a.textAlign=e.textStyle.align;let o=e.textStyle.left,l=e.textStyle.top;"right"===e.textStyle.align&&(o=e.imageStyle.width-e.textStyle.left),"string"==typeof e.content?a.fillText(e.content,o,l):Array.isArray(e.content)&&e.content.forEach((t=>{a.fillText(t,o,l),l+=e.textStyle.lineHeight}));const n=t.toDataURL("image/png"),i=document.createElement("div");return i.id=e.elementId,i.style.pointerEvents="none",i.style.position="absolute",i.style.zIndex=e.zIndex,i.style.width=e.targetElement.scrollWidth+"px",i.style.height=e.targetElement.scrollHeight+"px",i.style.top=e.targetElement.offsetTop+"px",i.style.left=e.targetElement.offsetLeft+"px",i.style.backgroundImage=`url(${n})`,i.style.backgroundPosition=e.imageStyle.position,i.style.backgroundRepeat=e.imageStyle.repeat,i}}const P=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;class H{constructor(e){if(!e instanceof HTMLElement)throw new Error(`targetElement (${e}) is not HTMLElement`);this.targetElement=e,this.container=this.targetElement===document.body?document.body:this.targetElement.parentElement,this.elementId="watermarkElementId"+1e4*Math.random(),this.observer=null,this.watermark=null,this.options=null}static init(e=document.body){return new H(e)}setForImage(e,t){if(t)this.targetElement.dataset.watermark="";else{if("marked"===this.targetElement.dataset.watermark)return;this.__src__=this.targetElement.src.toString(),this.__img__=this.targetElement.cloneNode(!0)}this.options=I(s(r({},e),{targetElement:this.targetElement}),r({},A(!0)));const a=new Image;a.crossOrigin="anonymous",a.onerror=t=>{this.setForMask(e),a.onerror=null},a.src=this.__src__,a.onload=e=>{let t=document.createElement("canvas");t.width=this.options.imageStyle.width,t.height=this.options.imageStyle.height;const a=parseInt(this.options.imageStyle.width),o=parseInt(this.options.imageStyle.height);t.width=this.targetElement.clientWidth,t.height=this.targetElement.clientHeight;let l=t.getContext("2d");l.drawImage(this.__img__,0,0),this.options.textStyle.rotate&&l.setTransform(1,this.options.textStyle.rotate*Math.PI/180,0,1,0,0),l.font=`${parseInt(this.options.textStyle.fontSize)}px ${this.options.textStyle.fontFamily}`,l.globalAlpha=this.options.textStyle.alpha,l.fillStyle=this.options.textStyle.color,l.textBaseline="Middle",l.textAlign=this.options.textStyle.align;let n=0,i=0;const r=Array.isArray(this.options.content)?this.options.content:[this.options.content];if("repeat"===this.options.imageStyle.repeat)for(let m=0;m<t.width;m+=a){n=m+this.options.textStyle.left;for(let e=0;e<t.height;e+=o)i=e+this.options.textStyle.top,r.forEach((e=>{l.fillText(e,n,i),i+=this.options.textStyle.lineHeight}))}else n=t.width-this.options.imageStyle.width-this.options.textStyle.left,i=t.height-this.options.imageStyle.height-this.options.textStyle.top,r.forEach((e=>{l.fillText(e,n,i),i+=this.options.textStyle.lineHeight}));this.targetElement.setAttribute("data-watermark","marked");const s=t.toDataURL("image/png");this.targetElement.src=s,l=t=null}}setForMask(e){this.clearObserver(),e.content&&e.content.length&&(this.removeWatermark(),this.options=I(s(r({},e),{targetElement:this.targetElement}),r({},A())),this.options.debug&&console.log("final options: ",this.options),this.createAndAppend())}setOption(e,t=!1){e.debug&&console.log("specified options: ",e),this.targetElement instanceof HTMLImageElement?this.setForImage(e,t):this.setForMask(e)}createAndAppend(){this.clearObserver(),this.options.content&&this.options.content.length&&(this.removeWatermark(),this.watermark=new L(s(r({},this.options),{elementId:this.elementId})),this.container.appendChild(this.watermark),this.observer=new P(((e,t)=>{for(let a=0;a<e.length;a++){const t=e[a];if("childList"===t.type&&[].some.call(t.removedNodes,(e=>e===this.watermark))){this.options.debug&&console.log("The watermark node has been removed."),this.createAndAppend();break}if("attributes"===t.type){this.options.debug&&console.log("The "+t.attributeName+" attribute was modified."),this.createAndAppend();break}}})),this.observer.observe(this.container,{attributes:!0,childList:!0,subtree:!0}))}clear(){this.clearObserver(),this.removeWatermark()}clearObserver(){this.observer&&(this.observer.disconnect(),this.observer=null)}removeWatermark(){this.watermark&&this.watermark.parentElement&&(this.watermark.parentElement.removeChild(this.watermark),this.watermark=null)}}const U=()=>{const e=new Date;return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`};const T={name:"ForPage",props:{showConsoleLog:{type:Boolean,default:!1}},setup(e,t){const a=[],o=g({labelPosition:"right",watermarkRef:null,formData:{hasWatermark:!0,checkList:[void 0],content:`CoderMonkey | 码路工人,快乐编程 · 佛系开发, ${U()}`,textAlign:"left",textLeft:20,textTop:100,fontSize:16,lineHeight:25,rotate:-10,textColor:"#fee0b9",textOpacity:1,repeat:"repeat",imagePositionX:"left",imagePositionY:"top",imageWidth:400,imageHeight:300,zIndex:999}}),l=p((()=>o.formData.content.split(","))),n=p((()=>`${o.formData.imagePositionX} ${o.formData.imagePositionY}`)),i=p((()=>({content:l.value,textStyle:{left:parseInt(o.formData.textLeft),top:parseInt(o.formData.textTop),rotate:o.formData.rotate,align:o.formData.textAlign,fontSize:o.formData.fontSize,lineHeight:o.formData.lineHeight,color:o.formData.textColor,alpha:o.formData.textOpacity},imageStyle:{width:o.formData.imageWidth,height:o.formData.imageHeight,position:n.value,repeat:o.formData.repeat},zIndex:o.formData.zIndex,debug:e.showConsoleLog})));h((()=>e.showConsoleLog),(e=>{m(o.formData.hasWatermark)}));const m=e=>{d(e?o.formData.checkList:[])},d=e=>{a.forEach((e=>{e.clear(),e=null})),a.length=0,e.forEach((e=>{const t=H.init(e);t.setOption(i.value),a.push(t)}))},y=()=>{o.labelPosition=document.body.clientWidth>1200?"right":"top"},x=()=>{d(o.formData.checkList)};return f((()=>{window.addEventListener("resize",y),u(x)})),c((()=>{window.removeEventListener("resize",y),m()})),s(r({},b(o)),{handleOptionsChange:x,computedOptions:i,ensureNumber:e=>{const t=o.formData[e];if(null==t||""===t)return;const a=parseInt(o.formData[e].toString().replace(/\D/g,""));o.formData[e]=Number.isNaN(a)?0:a},toggleWatermark:m,toggleAppendTo:d})}};m("data-v-31b8fa50");const W={class:"tab-for-page",ref:"watermarkRef"},M={class:"page-section__settings"},R=S("无水印 No Watermark"),F=S("加水印 Add Watermark"),j=D("div",null,"以下两项都勾选即多实例 Check Both below for Multi-Instance",-1),N=S("加水印到页面 Add to the full page"),$=S("加水印到标签页 Add to this Tab"),Y=D("h3",null,"imageStyle",-1),X=S("是"),B=S("否"),q=S(" 横： "),G=S("左"),J=S("中"),K=S("右"),Q=S(" 纵： "),Z=S("上"),ee=S("中"),te=S("下"),ae={style:{display:"inline-block",width:"120px"}},oe=S(" Width: "),le={style:{display:"inline-block",width:"120px"}},ne=S(" Height: "),ie=D("h3",null,"textStyle",-1),re=S("左"),se=S("右"),me={style:{"margin-left":"50px"}},de=D("span",{style:{"margin-right":"10px"}},"文字定位",-1),ge={style:{display:"inline-block",width:"120px"}},pe=S(" Left: "),he={style:{display:"inline-block",width:"120px"}},fe=S(" Top: "),ue=D("div",null,null,-1),ce=D("span",{class:"form-item__tip font-size-tip"},"10 ~ 48 (step 1)",-1),be=D("span",{class:"form-item__tip font-size-tip"},"15 ~ 60 (step 1)",-1),ye=D("span",{class:"form-item__tip rotate-tip"},"-360 ~ 360 (step 5)",-1),xe=D("span",{class:"form-item__tip text-opacity-tip"},"0.01 ~ 1 (step 0.01)",-1),Ce=D("span",{class:"form-item__tip text-opacity-tip"}," >> 当颜色中使用了透明度(即 RGBA)时，此处的透明度会同时起作用，建议使用默认值 1",-1),_e=D("h3",null,"z-index",-1),De={class:"page-section__setting-json"},Ve=D("pre",null,"targetElement: <HTMLElement>[states.watermarkRef]; \r\n      ",-1),ke=S(" 生成的配置对象： "),we=D("hr",null,null,-1);d(),T.render=function(e,t,a,o,l,n){const i=y("el-radio"),r=y("el-radio-group"),s=y("el-checkbox"),m=y("el-checkbox-group"),d=y("el-form-item"),g=y("el-input"),p=y("el-divider"),h=y("el-input-number"),f=y("el-color-picker"),u=y("el-form");return x(),C("div",W,[_(" \r\n        水印默认添加到 body 上<br />\r\n        也可指定为页面其它元素\r\n    "),D("section",M,[V(u,{"label-suffix":"：","label-width":"200px","label-position":e.labelPosition},{default:k((()=>[V(d,{label:""},{default:k((()=>[V(r,{modelValue:e.formData.hasWatermark,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData.hasWatermark=t),size:"small",onChange:o.toggleWatermark},{default:k((()=>[V(i,{label:!1},{default:k((()=>[R])),_:1}),V(i,{label:!0},{default:k((()=>[F])),_:1})])),_:1},8,["modelValue","onChange"]),j,V(m,{modelValue:e.formData.checkList,"onUpdate:modelValue":t[1]||(t[1]=t=>e.formData.checkList=t),disabled:!e.formData.hasWatermark,onChange:o.toggleAppendTo},{default:k((()=>[V(s,{label:void 0},{default:k((()=>[N])),_:1}),V(s,{label:e.watermarkRef},{default:k((()=>[$])),_:1},8,["label"])])),_:1},8,["modelValue","disabled","onChange"])])),_:1}),V(d,{label:"水印文字"},{default:k((()=>[V(g,{modelValue:e.formData.content,"onUpdate:modelValue":t[2]||(t[2]=t=>e.formData.content=t),placeholder:"@码路工人",size:"small",onChange:o.handleOptionsChange},null,8,["modelValue","onChange"])])),_:1}),V(p,{"content-position":"left"},{default:k((()=>[Y])),_:1}),V(d,{label:"是否重复"},{default:k((()=>[V(r,{modelValue:e.formData.repeat,"onUpdate:modelValue":t[3]||(t[3]=t=>e.formData.repeat=t),size:"small",onChange:o.handleOptionsChange},{default:k((()=>[V(i,{label:"repeat"},{default:k((()=>[X])),_:1}),V(i,{label:"no-repeat"},{default:k((()=>[B])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),V(d,{label:"水印位置"},{default:k((()=>[D("div",null,[q,V(r,{modelValue:e.formData.imagePositionX,"onUpdate:modelValue":t[4]||(t[4]=t=>e.formData.imagePositionX=t),size:"small",onChange:o.handleOptionsChange},{default:k((()=>[V(i,{label:"left"},{default:k((()=>[G])),_:1}),V(i,{label:"center"},{default:k((()=>[J])),_:1}),V(i,{label:"right"},{default:k((()=>[K])),_:1})])),_:1},8,["modelValue","onChange"])]),D("div",null,[Q,V(r,{modelValue:e.formData.imagePositionY,"onUpdate:modelValue":t[5]||(t[5]=t=>e.formData.imagePositionY=t),size:"small",onChange:o.handleOptionsChange},{default:k((()=>[V(i,{label:"top"},{default:k((()=>[Z])),_:1}),V(i,{label:"center"},{default:k((()=>[ee])),_:1}),V(i,{label:"bottom"},{default:k((()=>[te])),_:1})])),_:1},8,["modelValue","onChange"])])])),_:1}),V(d,{label:"水印尺寸"},{default:k((()=>[D("span",ae,[V(g,{type:"number",id:"imageWidth","input-style":{textAlign:"right"},modelValue:e.formData.imageWidth,"onUpdate:modelValue":t[6]||(t[6]=t=>e.formData.imageWidth=t),onChange:o.handleOptionsChange},{prefix:k((()=>[oe])),_:1},8,["modelValue","onChange"])]),D("span",le,[V(g,{type:"number",id:"imageHeight","input-style":{textAlign:"right"},modelValue:e.formData.imageHeight,"onUpdate:modelValue":t[7]||(t[7]=t=>e.formData.imageHeight=t),onChange:o.handleOptionsChange},{prefix:k((()=>[ne])),_:1},8,["modelValue","onChange"])])])),_:1}),V(p,{"content-position":"left"},{default:k((()=>[ie])),_:1}),V(d,{label:"文字排版"},{default:k((()=>[V(r,{border:"",modelValue:e.formData.textAlign,"onUpdate:modelValue":t[8]||(t[8]=t=>e.formData.textAlign=t),size:"small",onChange:o.handleOptionsChange},{default:k((()=>[V(i,{label:"left"},{default:k((()=>[re])),_:1}),V(i,{label:"right"},{default:k((()=>[se])),_:1})])),_:1},8,["modelValue","onChange"]),D("span",me,[de,D("span",ge,[V(g,{modelValue:e.formData.textLeft,"onUpdate:modelValue":t[9]||(t[9]=t=>e.formData.textLeft=t),type:"number",min:0,"input-style":{textAlign:"right"},onChange:o.handleOptionsChange},{prefix:k((()=>[pe])),_:1},8,["modelValue","onChange"])]),D("span",he,[V(g,{modelValue:e.formData.textTop,"onUpdate:modelValue":t[10]||(t[10]=t=>e.formData.textTop=t),type:"number",min:0,"input-style":{textAlign:"right"},onChange:o.handleOptionsChange},{prefix:k((()=>[fe])),_:1},8,["modelValue","onChange"])])]),ue])),_:1}),V(d,{label:"字体大小"},{default:k((()=>[V(h,{modelValue:e.formData.fontSize,"onUpdate:modelValue":t[11]||(t[11]=t=>e.formData.fontSize=t),min:10,max:48,step:1,"step-strictly":"",controls:!1,onChange:o.handleOptionsChange},null,8,["modelValue","onChange"]),ce])),_:1}),V(d,{label:"多行文本时用于累加的行高"},{default:k((()=>[V(h,{modelValue:e.formData.lineHeight,"onUpdate:modelValue":t[12]||(t[12]=t=>e.formData.lineHeight=t),min:15,max:60,step:1,"step-strictly":"",controls:!1,onChange:o.handleOptionsChange},null,8,["modelValue","onChange"]),be])),_:1}),V(d,{label:"文字倾斜"},{default:k((()=>[V(h,{modelValue:e.formData.rotate,"onUpdate:modelValue":t[13]||(t[13]=t=>e.formData.rotate=t),min:-360,max:360,step:5,"step-strictly":"",controls:!1,onChange:o.handleOptionsChange},null,8,["modelValue","onChange"]),ye])),_:1}),V(d,{label:"颜色"},{default:k((()=>[V(f,{modelValue:e.formData.textColor,"onUpdate:modelValue":t[14]||(t[14]=t=>e.formData.textColor=t),"show-alpha":"","color-format":"hex",onChange:o.handleOptionsChange},null,8,["modelValue","onChange"])])),_:1}),V(d,{label:"透明度"},{default:k((()=>[V(h,{modelValue:e.formData.textOpacity,"onUpdate:modelValue":t[15]||(t[15]=t=>e.formData.textOpacity=t),min:.01,max:1,step:.01,"step-strictly":"",controls:!1,onChange:o.handleOptionsChange},null,8,["modelValue","min","step","onChange"]),xe,Ce])),_:1}),V(p,{"content-position":"left"},{default:k((()=>[_e])),_:1}),V(d,null,{default:k((()=>[V(g,{modelValue:e.formData.zIndex,"onUpdate:modelValue":t[16]||(t[16]=t=>e.formData.zIndex=t),onKeyup:t[17]||(t[17]=e=>o.ensureNumber("zIndex"))},null,8,["modelValue"])])),_:1})])),_:1},8,["label-position"])]),D("section",De,[Ve,ke,we,D("pre",null,w(JSON.stringify(o.computedOptions,null,4))+"\r\n      ",1)])],512)},T.__scopeId="data-v-31b8fa50";const Se={name:"SettingForm",emits:["update:modelValue"],props:["modelValue","options"],setup:(e,t)=>({formData:p({get:()=>e.modelValue,set(e){t.emit("update:modelValue",e)}})})},ve=D("h3",null,"imageStyle",-1),Oe=S("是"),Ee=S("否"),ze=S(" 横： "),Ae=S("左"),Ie=S("中"),Le=S("右"),Pe=S(" 纵： "),He=S("上"),Ue=S("中"),Te=S("下"),We={style:{display:"inline-block",width:"120px"}},Me=S(" Width: "),Re={style:{display:"inline-block",width:"120px"}},Fe=S(" Height: "),je=D("h3",null,"textStyle",-1),Ne=S("左"),$e=S("右"),Ye={style:{"margin-left":"50px"}},Xe=D("span",{style:{"margin-right":"10px"}},"文字定位",-1),Be={style:{display:"inline-block",width:"120px"}},qe=S(" Left: "),Ge={style:{display:"inline-block",width:"120px"}},Je=S(" Top: "),Ke=D("div",null,null,-1),Qe=D("span",{class:"form-item__tip font-size-tip"},"10 ~ 48 (step 1)",-1),Ze=D("span",{class:"form-item__tip font-size-tip"},"15 ~ 60 (step 1)",-1),et=D("span",{class:"form-item__tip rotate-tip"},"-360 ~ 360 (step 5)",-1),tt=D("span",{class:"form-item__tip text-opacity-tip"},"0.01 ~ 1 (step 0.01)",-1),at=D("span",{class:"form-item__tip text-opacity-tip"}," >> 当颜色中使用了透明度(即 RGBA)时，此处的透明度会同时起作用，建议使用默认值 1",-1);Se.render=function(e,t,a,o,l,n){const i=y("el-input"),r=y("el-form-item"),s=y("el-divider"),m=y("el-radio"),d=y("el-radio-group"),g=y("el-input-number"),p=y("el-color-picker"),h=y("el-form");return x(),C("div",null,[V(h,{"label-suffix":"：","label-width":"200px"},{default:k((()=>[V(r,{label:"水印文字"},{default:k((()=>[V(i,{modelValue:o.formData.content,"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.content=e),placeholder:"@码路工人",size:"small",onChange:e.handleOptionsChange},null,8,["modelValue","onChange"])])),_:1}),V(s,{"content-position":"left"},{default:k((()=>[ve])),_:1}),V(r,{label:"是否重复"},{default:k((()=>[V(d,{modelValue:o.formData.repeat,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.repeat=e),size:"small",onChange:e.handleOptionsChange},{default:k((()=>[V(m,{label:"repeat"},{default:k((()=>[Oe])),_:1}),V(m,{label:"no-repeat"},{default:k((()=>[Ee])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),V(r,{label:"水印位置"},{default:k((()=>[D("div",null,[ze,V(d,{modelValue:o.formData.imagePositionX,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.imagePositionX=e),size:"small",onChange:e.handleOptionsChange},{default:k((()=>[V(m,{label:"left"},{default:k((()=>[Ae])),_:1}),V(m,{label:"center"},{default:k((()=>[Ie])),_:1}),V(m,{label:"right"},{default:k((()=>[Le])),_:1})])),_:1},8,["modelValue","onChange"])]),D("div",null,[Pe,V(d,{modelValue:o.formData.imagePositionY,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.imagePositionY=e),size:"small",onChange:e.handleOptionsChange},{default:k((()=>[V(m,{label:"top"},{default:k((()=>[He])),_:1}),V(m,{label:"center"},{default:k((()=>[Ue])),_:1}),V(m,{label:"bottom"},{default:k((()=>[Te])),_:1})])),_:1},8,["modelValue","onChange"])])])),_:1}),V(r,{label:"水印尺寸"},{default:k((()=>[D("span",We,[V(i,{type:"number",id:"imageWidth","input-style":{textAlign:"right"},modelValue:o.formData.imageWidth,"onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.imageWidth=e),onChange:e.handleOptionsChange},{prefix:k((()=>[Me])),_:1},8,["modelValue","onChange"])]),D("span",Re,[V(i,{type:"number",id:"imageHeight","input-style":{textAlign:"right"},modelValue:o.formData.imageHeight,"onUpdate:modelValue":t[5]||(t[5]=e=>o.formData.imageHeight=e),onChange:e.handleOptionsChange},{prefix:k((()=>[Fe])),_:1},8,["modelValue","onChange"])])])),_:1}),V(s,{"content-position":"left"},{default:k((()=>[je])),_:1}),V(r,{label:"文字排版"},{default:k((()=>[V(d,{border:"",modelValue:o.formData.textAlign,"onUpdate:modelValue":t[6]||(t[6]=e=>o.formData.textAlign=e),size:"small",onChange:e.handleOptionsChange},{default:k((()=>[V(m,{label:"left"},{default:k((()=>[Ne])),_:1}),V(m,{label:"right"},{default:k((()=>[$e])),_:1})])),_:1},8,["modelValue","onChange"]),D("span",Ye,[Xe,D("span",Be,[V(i,{modelValue:o.formData.textLeft,"onUpdate:modelValue":t[7]||(t[7]=e=>o.formData.textLeft=e),type:"number",min:0,"input-style":{textAlign:"right"},onChange:e.handleOptionsChange},{prefix:k((()=>[qe])),_:1},8,["modelValue","onChange"])]),D("span",Ge,[V(i,{modelValue:o.formData.textTop,"onUpdate:modelValue":t[8]||(t[8]=e=>o.formData.textTop=e),type:"number",min:0,"input-style":{textAlign:"right"},onChange:e.handleOptionsChange},{prefix:k((()=>[Je])),_:1},8,["modelValue","onChange"])])]),Ke])),_:1}),V(r,{label:"字体大小"},{default:k((()=>[V(g,{modelValue:o.formData.fontSize,"onUpdate:modelValue":t[9]||(t[9]=e=>o.formData.fontSize=e),min:10,max:48,step:1,"step-strictly":"",controls:!1,onChange:e.handleOptionsChange},null,8,["modelValue","onChange"]),Qe])),_:1}),V(r,{label:"多行文本时用于累加的行高"},{default:k((()=>[V(g,{modelValue:o.formData.lineHeight,"onUpdate:modelValue":t[10]||(t[10]=e=>o.formData.lineHeight=e),min:15,max:60,step:1,"step-strictly":"",controls:!1,onChange:e.handleOptionsChange},null,8,["modelValue","onChange"]),Ze])),_:1}),V(r,{label:"文字倾斜"},{default:k((()=>[V(g,{modelValue:o.formData.rotate,"onUpdate:modelValue":t[11]||(t[11]=e=>o.formData.rotate=e),min:-360,max:360,step:5,"step-strictly":"",controls:!1,onChange:e.handleOptionsChange},null,8,["modelValue","onChange"]),et])),_:1}),V(r,{label:"颜色"},{default:k((()=>[V(p,{modelValue:o.formData.textColor,"onUpdate:modelValue":t[12]||(t[12]=e=>o.formData.textColor=e),"show-alpha":"","color-format":"hex",onChange:e.handleOptionsChange},null,8,["modelValue","onChange"])])),_:1}),V(r,{label:"透明度"},{default:k((()=>[V(g,{modelValue:o.formData.textOpacity,"onUpdate:modelValue":t[13]||(t[13]=e=>o.formData.textOpacity=e),min:.01,max:1,step:.01,"step-strictly":"",controls:!1,onChange:e.handleOptionsChange},null,8,["modelValue","min","step","onChange"]),tt,at])),_:1})])),_:1})])};const ot={props:{text:{type:String,default:""}},setup:()=>({})};m("data-v-1eef6c9c");const lt={class:"quote-block"};d(),ot.render=function(e,t,a,o,l,n){return x(),C("div",lt,w(a.text),1)},ot.__scopeId="data-v-1eef6c9c";const nt={name:"DialogConfigSetting",components:{SettingForm:Se},props:{visible:{type:Boolean,default:!1},config:{type:Object,default:()=>{}}},emits:["update:visible","update:config"],setup(e,t){const a=g({dialogVisible:p({get:()=>e.visible,set(e){t.emit("update:visible",e)}}),formData:p({get:()=>e.config,set(e){t.emit("update:config",r({},e))}})}),o=p((()=>a.formData.content.split(","))),l=p((()=>`${a.formData.imagePositionX} ${a.formData.imagePositionY}`)),n=p((()=>({content:o.value,targetElement:a.watermarkRef,textStyle:{left:parseInt(a.formData.textLeft),top:parseInt(a.formData.textTop),rotate:a.formData.rotate,align:a.formData.textAlign,fontSize:a.formData.fontSize,lineHeight:a.formData.lineHeight,color:a.formData.textColor,alpha:a.formData.textOpacity},imageStyle:{width:a.formData.imageWidth,height:a.formData.imageHeight,position:l.value,repeat:a.formData.repeat}})));return s(r({},b(a)),{handleClose:()=>{t.emit("close",n),a.dialogVisible=!1}})}},it={class:"dialog-footer"},rt=S("取 消"),st=S("确 定");nt.render=function(e,t,a,o,l,n){const i=y("SettingForm"),r=y("el-button"),s=y("el-dialog");return x(),C("div",null,[V(s,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogVisible=t),onClose:o.handleClose},{footer:k((()=>[D("span",it,[V(r,{onClick:t[1]||(t[1]=t=>e.dialogVisible=!1)},{default:k((()=>[rt])),_:1}),V(r,{type:"primary",onClick:o.handleClose},{default:k((()=>[st])),_:1},8,["onClick"])])])),default:k((()=>[V(i,{modelValue:e.formData,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData=t)},null,8,["modelValue"])])),_:1},8,["modelValue","onClose"])])};const mt={name:"ForImage",components:{SettingForm:Se,Quote:ot,DialogConfigSetting:nt},setup(){const e=[],t=g({labelPosition:"right",watermarkRef1:null,watermarkRef2:null,watermarkRef3:null,case1DialogVisible:!1,case2DialogVisible:!1,case3DialogVisible:!1,formData:{content:"CoderMonkey,  码路工人",textAlign:"right",textLeft:20,textTop:100,fontSize:18,lineHeight:25,rotate:-10,textColor:"#d9d9d94d",textOpacity:1,repeat:"no-repeat",imagePositionX:"right",imagePositionY:"bottom",imageWidth:240,imageHeight:180},configCase1:{content:"CoderMonkey | 码路工人,   2012-04 | by MiOne ",textAlign:"left",textLeft:0,textTop:20,fontSize:18,lineHeight:25,rotate:0,textColor:"#b9b9b9",textOpacity:1,repeat:"no-repeat",imagePositionX:"right",imagePositionY:"bottom",imageWidth:240,imageHeight:60},configCase2:{content:"码   路   工   人,CoderMonkey",textAlign:"left",textLeft:50,textTop:100,fontSize:18,lineHeight:25,rotate:-20,textColor:"lightgray",textOpacity:1,repeat:"repeat",imagePositionX:"left",imagePositionY:"top",imageWidth:400,imageHeight:240},configCase3:{content:"CoderMonkey | 码路工人,2018-11-20          , @Tokyo              ",textAlign:"right",textLeft:20,textTop:100,fontSize:18,lineHeight:25,rotate:0,textColor:"#d9d9d9",textOpacity:1,repeat:"no-repeat",imagePositionX:"right",imagePositionY:"bottom",imageWidth:240,imageHeight:180}}),a=e=>{const t=p((()=>e.content.split(","))),a=p((()=>`${e.imagePositionX} ${e.imagePositionY}`));return p((()=>({content:t.value,textStyle:{left:parseInt(e.textLeft),top:parseInt(e.textTop),rotate:e.rotate,align:e.textAlign,fontSize:e.fontSize,lineHeight:e.lineHeight,color:e.textColor,alpha:e.textOpacity},imageStyle:{width:e.imageWidth,height:e.imageHeight,position:a.value,repeat:e.repeat}})))},o=[];o.push(a(t.configCase1)),o.push(a(t.configCase2)),o.push(a(t.configCase3));const l=(t,a=!1)=>{e[t].setOption(o[t].value,a)},n=()=>{t.labelPosition=document.body.clientWidth>1200?"right":"top"};return f((()=>{window.addEventListener("resize",n),e.push(H.init(t.watermarkRef1)),e.push(H.init(t.watermarkRef2)),e.push(H.init(t.watermarkRef3)),t.watermarkRef1.setAttribute("src","./images/clover.png"),t.watermarkRef2.setAttribute("src","./images/tokyo-sky-tree.jpg"),t.watermarkRef3.setAttribute("src","https://gitee.com/Coding-Worker/picture/raw/master/2021-7-28/1627448089888-tokyo-sky-tree.jpg"),t.watermarkRef1.onload=l(0),t.watermarkRef2.onload=l(1),t.watermarkRef3.onload=l(2)})),c((()=>{window.removeEventListener("resize",n),e&&e.forEach((e=>e.clear()))})),s(r({},b(t)),{computedOptions:o,showSettingDialog:e=>{t[`case${e}DialogVisible`]=!0},handleSetting:l})}};m("data-v-f1269860");const dt={class:"tab-for-image"},gt={class:"case-1-block flex flex-column align-center"},pt=S("点我修改水印配置 | Click me to set watermark"),ht={ref:"watermarkRef1",class:"el-image__inner"},ft={class:"case-2-block flex flex-column align-center"},ut=S("点我修改水印配置 | Click me to set watermark"),ct={ref:"watermarkRef2",class:"el-image__inner"},bt={class:"case-3-block flex flex-column align-center"},yt=S("点我修改水印配置 | Click me to set watermark"),xt={ref:"watermarkRef3",class:"el-image__inner"};d(),mt.render=function(e,t,a,o,l,n){const i=y("Quote"),r=y("el-button"),s=y("DialogConfigSetting"),m=y("el-divider");return x(),C("div",dt,[V(i,{text:"Case 1：Same origin image | no-repeat",class:"case-title"}),D("div",gt,[V(r,{onClick:t[0]||(t[0]=e=>o.showSettingDialog(1))},{default:k((()=>[pt])),_:1}),D("img",ht,null,512),e.case1DialogVisible?(x(),v(s,{key:0,visible:e.case1DialogVisible,"onUpdate:visible":t[1]||(t[1]=t=>e.case1DialogVisible=t),config:e.configCase1,"onUpdate:config":t[2]||(t[2]=t=>e.configCase1=t),onClose:t[3]||(t[3]=e=>o.handleSetting(0,!0))},null,8,["visible","config"])):_("v-if",!0)]),V(i,{text:"Case 2：Same origin image | repeat",class:"case-title"}),D("div",ft,[V(r,{onClick:t[4]||(t[4]=e=>o.showSettingDialog(2))},{default:k((()=>[ut])),_:1}),D("img",ct,null,512),e.case2DialogVisible?(x(),v(s,{key:0,visible:e.case2DialogVisible,"onUpdate:visible":t[5]||(t[5]=t=>e.case2DialogVisible=t),config:e.configCase2,"onUpdate:config":t[6]||(t[6]=t=>e.configCase2=t),onClose:t[7]||(t[7]=e=>o.handleSetting(1,!0))},null,8,["visible","config"])):_("v-if",!0)]),V(i,{text:"Case 3：Cross origin image | no-repeat",class:"case-title"}),D("div",bt,[V(r,{onClick:t[8]||(t[8]=e=>o.showSettingDialog(3))},{default:k((()=>[yt])),_:1}),D("img",xt,null,512),e.case3DialogVisible?(x(),v(s,{key:0,visible:e.case3DialogVisible,"onUpdate:visible":t[9]||(t[9]=t=>e.case3DialogVisible=t),config:e.configCase3,"onUpdate:config":t[10]||(t[10]=t=>e.configCase3=t),onClose:t[11]||(t[11]=e=>o.handleSetting(2,!0))},null,8,["visible","config"])):_("v-if",!0)]),V(m),_(' <section class="page-section__setting-json">\r\n      <pre>targetElement: &lt;HTMLElement&gt;[states.watermarkRef?.$el]</pre>\r\n      <span>&nbsp;&nbsp;The Setting JSON</span>\r\n      <hr />\r\n      <pre>{{ JSON.stringify(computedOptions, null, 4) }}</pre>\r\n    </section> ')])},mt.__scopeId="data-v-f1269860";const Ct={name:"App",components:{ForPage:T,ForImage:mt},setup(){const e=g({activeTab:"page",showConsoleLog:!1});return r({},b(e))}};m("data-v-7ba5bd90");const _t={class:"static-config"},Dt=D("span",null,"console log",-1),Vt={class:"app-container"},kt=D("section",{class:"page-section__header flex flex-column align-center"},[D("h1",null,"js-watermarker"),D("div",null,[S(" The demo using: "),D("ul",null,[D("li",null,"Vue3.0"),D("li",null,"Vite"),D("li",null,"Element Plus")])]),D("h3",{class:"title"},"maonianyou@gmail.com")],-1),wt={class:"page-section__nav-tabs"};d(),Ct.render=function(e,t,a,o,l,n){const i=y("el-checkbox"),r=y("ForPage"),s=y("el-tab-pane"),m=y("ForImage"),d=y("el-tabs");return x(),C(O,null,[D("div",_t,[V(i,{modelValue:e.showConsoleLog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.showConsoleLog=t)},{default:k((()=>[Dt])),_:1},8,["modelValue"])]),D("div",Vt,[kt,D("section",wt,[V(d,{modelValue:e.activeTab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.activeTab=t)},{default:k((()=>[V(s,{label:"For Page",name:"page"},{default:k((()=>["page"===e.activeTab?(x(),v(r,{key:0,"show-console-log":e.showConsoleLog},null,8,["show-console-log"])):_("v-if",!0)])),_:1}),V(s,{label:"For Image",name:"image"},{default:k((()=>["image"===e.activeTab?(x(),v(m,{key:0})):_("v-if",!0)])),_:1})])),_:1},8,["modelValue"])])])],64)},Ct.__scopeId="data-v-7ba5bd90";E(Ct).use(z).mount("#app");
